load("//src/main/k8s:macros.bzl", "cue_dump")

cue_dump(
    name = "kingdom_gke",
    srcs = [
        "kingdom_gke.cue",
        "//src/main/k8s:base.cue",
        "//src/main/k8s:kingdom.cue",
        "//src/main/k8s:resource_setup.cue",
    ],
    cue_tags = {
        "secret_name": "TBD",
    },
)

cue_dump(
    name = "aggregator_gke",
    srcs = [
        "duchy_gke.cue",
        "//src/main/k8s:base.cue",
        "//src/main/k8s:duchy.cue",
    ],
    cue_tags = {
        "duchy_name": "aggregator",
        "duchy_cert_name": "TBD",
        "duchy_protocols_setup_config": "aggregator_protocols_setup_config.textproto",
        "secret_name": "TBD",
    },
)

cue_dump(
    name = "worker1_gke",
    srcs = [
        "duchy_gke.cue",
        "//src/main/k8s:base.cue",
        "//src/main/k8s:duchy.cue",
    ],
    cue_tags = {
        "duchy_name": "worker1",
        "duchy_cert_name": "TBD",
        "duchy_protocols_setup_config": "non_aggregator_protocols_setup_config.textproto",
        "secret_name": "TBD",
    },
)

cue_dump(
    name = "worker2_gke",
    srcs = [
        "duchy_gke.cue",
        "//src/main/k8s:base.cue",
        "//src/main/k8s:duchy.cue",
    ],
    cue_tags = {
        "duchy_name": "worker2",
        "duchy_cert_name": "TBD",
        "duchy_protocols_setup_config": "non_aggregator_protocols_setup_config.textproto",
        "secret_name": "TBD",
    },
)

cue_dump(
    name = "edp_simulator_gke",
    srcs = [
        "edp_simulator_gke.cue",
        "//src/main/k8s:base.cue",
        "//src/main/k8s:edp_simulator.cue",
    ],
    cue_tags = {
        "mc_name": "TBD",
        "edp1_name": "TBD",
        "edp2_name": "TBD",
        "edp3_name": "TBD",
        "edp4_name": "TBD",
        "edp5_name": "TBD",
        "edp6_name": "TBD",
        "secret_name": "TBD",
    },
)

cue_dump(
    name = "frontend_simulator_gke",
    srcs = [
        "frontend_simulator_gke.cue",
        "//src/main/k8s:base.cue",
        "//src/main/k8s:frontend_simulator.cue",
    ],
    cue_tags = {
        "mc_name": "TBD",
        "secret_name": "TBD",
    },
)

filegroup(
    name = "k8s_deployment_config",
    srcs = [
        ":aggregator_gke.yaml",
        ":edp_simulator_gke.yaml",
        ":frontend_simulator_gke.yaml",
        ":kingdom_gke.yaml",
        ":worker1_gke.yaml",
        ":worker2_gke.yaml",
    ],
    tags = ["manual"],
    visibility = [
        "//src/main/kotlin/org/wfanet/measurement/tools:__subpackage__",
    ],
)
